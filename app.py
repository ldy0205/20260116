#streamlitì„ ì“°ëŠ” ì´ìœ : ë°°í¬ê°€ ì‰¬ì›€. flaskëŠ” ë°°í¬ê°€ ì–´ë ¤ì›€.
#css styleì„ ì´ìš©í•´ì„œ ê¸€ì í¬ê¸°ë¥¼ ì¡°ì •í•˜ê±°ë‚˜, ê¸€ì ìƒ‰ê¹”ì„ ë°”ê¿€ ìˆ˜ ìˆìŒ.
import streamlit as st
import pandas as pd
#pandas ê·¸ë˜í”„, ì°¨íŠ¸ ê·¸ë¦´ ë•Œ ì‚¬ìš©, numbyëŠ” ìˆ˜ì¹˜ ê³„ì‚° í•  ë•Œ ì‚¬ìš©
import matplotlib.pyplot as plt
import numpy as np
import seaborn as sns
#pip install matplotlib seaborn

# 1. í•œê¸€ í°íŠ¸ ì„¤ì • (ì´ê²Œ ì—†ìœ¼ë©´ ê·¸ë˜í”„ ì œëª©ì´ ê¹¨ì ¸ìš”!)
plt.rc('font', family='Malgun Gothic') 
plt.rcParams['axes.unicode_minus'] = False # ë§ˆì´ë„ˆìŠ¤ ê¸°í˜¸ ê¹¨ì§ ë°©ì§€

st.title("ğŸ“Šêµ­ì„¸ì²­ ê·¼ë¡œì†Œë“ ë°ì´í„° ë¶„ì„ê¸°")

#ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
file_path="êµ­ì„¸ì²­_ê·¼ë¡œì†Œë“ ë°±ë¶„ìœ„(ì²œë¶„ìœ„) ìë£Œ_20241231.csv"
#app.pyì™€ csv íŒŒì¼ì´ ê°™ì€ í´ë”ì— ìˆì–´ì•¼ í•¨.

#file_path="./data/êµ­ì„¸ì²­_ê·¼ë¡œì†Œë“ ë°±ë¶„ìœ„(ì²œë¶„ìœ„) ìë£Œ_20241231.csv"
#data í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ ê·¸ ì•ˆì— csv íŒŒì¼ì„ ë„£ì–´ë’€ì„ ë•Œ í•´ì„: ./í˜„ì¬ ìœ„ì¹˜ì— data/ í´ë”ì•ˆì— ìˆëŠ” csv íŒŒì¼
try:
   #ìë£Œ ì½ê¸°
   df=pd.read_csv(file_path,encoding='cp949')
   st.success("âœ…ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ ì™”ìŠµë‹ˆë‹¤!âœ…")

   #ë°ì´í„° ë¯¸ë¦¬ ë³´ê¸°
   st.subheader("âœ”ï¸ë°ì´í„°ë¥¼ í™•ì¸í•˜ê¸°")
   st.dataframe(df.head())   #í‘œ ìƒë‹¨ 5ì¤„ ë³´ì—¬ì£¼ê¸°

   #ë°ì´í„° ë¶„ì„ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
   st.subheader("ğŸ“‰í•­ëª©ë³„ ë¶„í¬ ê·¸ë˜í”„")
   #ë¶„ì„í•˜ê³  ì‹¶ì€ ì—´ ì´ë¦„ ì„ íƒ
   #ì˜ˆë¥¼ ë“¤ì–´ ê¸‰ì—¬ë‚˜ ì¸ì› ê°™ì€ ìˆ«ì ë°ì´í„°ê°€ ìˆëŠ” ì¹¸ì„ ê³¨ë¼ì•¼ í•œë‹¤.
   
   column_names =df.columns.tolist()  #columns ì—´ ì´ë¦„ë“¤ì„ ëª¨ì•„ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ê² ë‹¤.
   selected_col=st.selectbox("ë¶„ì„í•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”:", column_names)

   #ê·¸ë˜í”„ ê·¸ë¦¬ê¸°(seaborn ì‚¬ìš©)
   fig, ax=plt.subplots(figsize=(10,5)) #fig ê·¸ë˜í”„ì˜ ì „ì²´ì‚¬ì´ì¦ˆ #ax ê·¸ë˜í”„ì˜ ì¶•
   sns.histplot(df[selected_col],ax=ax, color="#cc00ff") #16ì§„ìˆ˜ ì¹¼ë¼í‘œ
   
   plt.title(f"[{selected_col}] ë¶„í¬í™•ì¸") #ê·¸ë˜í”„ ë§¨ ìœ„ì— ì œëª©
   plt.xlabel(selected_col) #xì¶• ì œëª© (ì˜ˆ:ê¸‰ì—¬ì•¡)
   plt.ylabel("ë¹ˆë„ìˆ˜") #yì¶• ì œëª© ì–¼ë§ˆë‚˜ ìì£¼ ë‚˜ì˜¤ëŠ”ì§€..

   #ìŠ¤íŠ¸ë¦¼ë¦¿ ì›¹ í™”ë©´ì— ê·¸ë˜í”„ í‘œì‹œ
   st.pyplot(fig)

except FileNotFoundError:
    st.error("âŒë°ì´í„° íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.âŒ")
except Exception as e:
    st.error(f"âŒë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {e}âŒ")
#ì˜¤ë¥˜ê°€ ì—†ìœ¼ë©´ try ì‹¤í–‰, ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ except ì‹¤í–‰
#r,g,b 0-255 15ì§„ë²• 0~15 8,9,10,15 a,b,c,d...f
#redì¼ ê²½ìš° r 255 g00 b00 ->#ff0000 red
